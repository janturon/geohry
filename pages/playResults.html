<script>

    var answers = STATE.answers;
    LS.get("G", "game");
    LS.get("G", "questions");
    var data = [];

    for(var key in answers) {

        var q = G.questions.find(i => i.uniqid === key);
        data.push({
            questionName: q.name, score: answers[key]
        });

    }

    var maxScore = data.length * 2;
    var sumScore = data.reduce((acc, val) => acc + val.score, 0);

    function pasteDataToTable(data, tableContentAfter) {
        var table = tableContentAfter.parentNode;
        var virtualContainer = document.createDocumentFragment();

        for(var piece of data) {
            virtualContainer.appendChild(
                ElemFromText(`<tr><td>${ piece.questionName }</td><td>${ piece.score }</td></tr>`)
            );
        }

        table.insertBefore(virtualContainer, tableContentAfter);
    }
    
    async function sendScore() {
        await API("sendScore", JSON.stringify(answers));
        //setContent("homeGame");
    }
</script>

<h2>Tvoje skóre</h2>

<div style="margin-bottom: 20px;">
    <table class="score-table" id="scoreTable">
        <tr><th>Otázka</th><th>Počet bodů</th></tr>
        <!-- table content -->
        <tr style="border-top: 1px solid #ddd;"><th colspan="2">Bodů celkem</th></tr>
        <tr><td colspan="2" id="scoreSum"></td></tr>
    </table>
</div>
<script>
    id(["scoreSum", "scoreTable"]);
    scoreSum.innerText = `${ sumScore }/${ maxScore }`;

    pasteDataToTable(data, scoreTable.children[0].children[1]); // scoreTable.children[1] = <tr><th colspan="2">Bodů celkem</th></tr>
</script>

<button type="button" onclick="sendScore()">Ok</button>