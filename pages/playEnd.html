<script>

    LS.get("G", "game");
    var answers = STATE.answers;

    /*answers = {
        "asdfasdf": 2,
        "asdfasdffasd": 1
    };*/

    var answersArr = Object.values(answers);
    var maxScore = answersArr.length * 2;
    var sumScore = answersArr.reduce((acc, val) => acc + val, 0);
    
    function postFixCapture(postFix, gameDetails, pre) {

        if(postFix !== 0) {
            if(!gameDetails[`${pre}${postFix}`] || !gameDetails[`${pre}${postFix}`].length) {
                return postFixCapture(--postFix, gameDetails, pre);
            } 

            return gameDetails[`${pre}${postFix}`];
        }

        //default message or outro
        return pre === 'goodbye' ? "default message" : "default outro"; //Texts...

    }

    function displayMessageAndOutro(sumScore, maxScore, goodbyeElem, outroElem) {

        var percentScore = (sumScore / maxScore) * 100;
        var postFix = percentScore === 100 ? 1 : percentScore >= 60 ? 2 : 3;
        var gameDetails = G.game;

        var goodbyeMessage = postFixCapture(postFix, gameDetails, 'goodbye');
        var outro = postFixCapture(postFix, gameDetails, 'outro');

        goodbyeElem.innerText = goodbyeMessage;
        outroElem.style.background = `center/cover url('${outro}.jpg')`;
        outroElem.style.display = 'block';
        
    }

    function showResults() {
        setContent("playResults"); //mozna?
    }

</script>

<h2>Tvoje skóre</h2>

<div id="outro" style="display: none; width: 100%; height: 480px; margin-bottom: 20px;"></div>

<div id="goodbyeMessage" style="margin-bottom: 20px;"></div>
<script>
    id(["outro", "goodbyeMessage"]);
    displayMessageAndOutro(sumScore, maxScore, goodbyeMessage, outro);
</script>

<button type="button" onclick="showResults()">Ukaž výsledky</button>